<div class="dashboard-container">

  <header class="section-header">
    <h2>Resumen del Día</h2>
    <p class="subtitle">Gestiona tu imperio financiero.</p>
  </header>

  <div *ngIf="isLoading()" class="loading-state">
    <span class="spinner"></span>
    <p>Consultando libros contables...</p>
  </div>

  <div *ngIf="error()" class="error-card">
    <span class="material-symbols-rounded icon">error</span>
    <p>{{ error() }}</p>
    <button class="btn-retry" (click)="loadData()">Reintentar</button>
  </div>

  <div *ngIf="status()" class="stats-grid">

    <div class="card hero-card">
      <div class="card-header">
        <span class="label">DISPONIBLE PARA HOY</span>
        <span class="material-symbols-rounded icon">account_balance</span>
      </div>

      <div class="amount-wrapper" [class.privacy-blur]="uiState.isPrivacyMode()">
        <h1 [style.color]="getAvailabilityColor(status()!.availableForToday)">
          {{ status()!.availableForToday | currency:'PEN':'symbol':'1.2-2' }}
        </h1>
      </div>

      <div class="card-footer">
        <span class="info-text">
          Quedan <strong>{{ status()!.remainingDays }} días</strong> en el mes
        </span>
      </div>
    </div>

    <div class="card metric-card">
      <div class="icon-box blue">
        <span class="material-symbols-rounded">flag</span>
      </div>
      <div class="metric-content">
        <span class="label">Límite Mensual</span>
        <span class="value" [class.privacy-blur]="uiState.isPrivacyMode()">
          {{ status()!.totalMonthLimit | currency:'PEN':'symbol':'1.0-0' }}
        </span>
      </div>
    </div>

    <div class="card metric-card">
      <div class="icon-box red">
        <span class="material-symbols-rounded">trending_down</span>
      </div>
      <div class="metric-content">
        <span class="label">Gastado Mes</span>
        <span class="value" [class.privacy-blur]="uiState.isPrivacyMode()">
          {{ status()!.totalMonthSpent | currency:'PEN':'symbol':'1.0-0' }}
        </span>
      </div>
    </div>

  </div>
</div>

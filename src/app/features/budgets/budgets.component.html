<div class="budgets-page">

  <header class="page-header">
    <div class="header-content">
      <h1>Presupuestos</h1>

      <div class="month-navigator">
        <button class="nav-btn" (click)="changeMonth(-1)">
          <span class="material-symbols-rounded">chevron_left</span>
        </button>
        <span class="current-month">
          {{ currentDate() | date:'MMMM yyyy' | titlecase }}
        </span>
        <button class="nav-btn" (click)="changeMonth(1)">
          <span class="material-symbols-rounded">chevron_right</span>
        </button>
      </div>
    </div>

    <button class="btn-primary" (click)="openCreateModal()">
      <span class="material-symbols-rounded">add</span>
      Asignar
    </button>
  </header>

  <div *ngIf="isLoading()" class="loading-state">
    <div class="spinner"></div>
    <p>Analizando gastos...</p>
  </div>

  <div *ngIf="!isLoading()" class="budgets-list">

    <app-budget-progress
      *ngFor="let item of budgets()"
      [budget]="item">
    </app-budget-progress>

    <div *ngIf="budgets().length === 0" class="empty-state">
      <span class="material-symbols-rounded icon">fact_check</span>
      <p>No hay presupuestos definidos para este mes.</p>
      <button class="btn-link" (click)="openCreateModal()">Crear el primero</button>
    </div>

  </div>

</div>
